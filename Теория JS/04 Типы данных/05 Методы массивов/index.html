<!DOCTYPE html>
<html>
	<body>
		<script>
			// 1-я задача Напишите функцию camelize(str), которая преобразует строки вида «my-short-string» в «myShortString».
			function camelize(str) {
				return str
					.split('-')
					.map((word, index) =>
						index == 0 ? word : word[0].toUpperCase() + word.slice(1)
					)
					.join('')
			}

			alert(camelize('background-color'))
			alert(camelize('list-style-image'))
			alert(camelize('-webkit-transition'))

			/* 2-я задача Напишите функцию filterRange(arr, a, b), которая принимает массив arr,
			ищет элементы со значениями больше или равными a и меньше или равными b и возвращает результат в виде массива.*/
			function filterRange(arr, a, b) {
				return arr.filter(item => a <= item && item <= b)
			}

			let arr = [5, 3, 8, 1]
			let filtered = filterRange(arr, 1, 4)

			alert(filtered)

			/* 3-я задача Напишите функцию filterRangeInPlace(arr, a, b), которая принимает массив arr и удаляет из него все значения кроме тех, 
			которые находятся между a и b. То есть, проверка имеет вид a ≤ arr[i] ≤ b.*/
			function filterRangeInPlace(arr, a, b) {
				for (let i = 0; i < arr2.length; i++) {
					let val = arr[i]

					if (val < a || val > b) {
						arr2.splice(i, 1)
						i--
					}
				}
			}

			let arr2 = [2, 4, 6, 8, 10]

			filterRangeInPlace(arr2, 3, 9)

			alert(arr2)

			// 4-я задача Создайте функцию copySorted(arr), которая будет возвращать такую копию.
			function copySorted(arr) {
				return arr.slice().sort()
			}
			let arr3 = ['HTML', 'JavaScript', 'CSS']
			let sorted = copySorted(arr3)

			alert(sorted)

			// 5-я задача Создайте функцию конструктор Calculator, которая создаёт «расширяемые» объекты калькулятора.
			function Calculator() {
				this.methods = {
					'-': (a, b) => a - b,
					'+': (a, b) => a + b,
				}

				this.calculate = function (str) {
					let split = str.split(' '),
						a = +split[0],
						op = split[1],
						b = +split[2]

					if (!this.methods[op] || isNaN(a) || isNaN(b)) {
						return NaN
					}

					return this.methods[op](a, b)
				}

				this.addMethod = function (name, func) {
					this.methods[name] = func
				}
			}

			// 6-я задача Трансформировать в массив имён
			let vasya = { name: 'Вася', age: 25 }
			let petya = { name: 'Петя', age: 30 }
			let masha = { name: 'Маша', age: 28 }

			let users = [vasya, petya, masha]
			let names = users.map(item => item.name)

			alert(names)

			// 7-я задача Трансформировать в объекты
			let kolya = { name: 'Коля', surname: 'Пупкин', id: 1 }
			let dima = { name: 'Дима', surname: 'Иванов', id: 2 }
			let katya = { name: 'Катя', surname: 'Петрова', id: 3 }

			let users2 = [kolya, dima, katya]
			let usersMapped = users2.map(user => ({
				fullName: `${user.name} ${user.surname}`,
				id: user.id,
			}))

			alert(usersMapped[0].id)
			alert(usersMapped[0].fullName)

			// 8-я задача Напишите функцию sortByAge(users), которая принимает массив объектов со свойством age и сортирует их по нему.
			let vova = { name: 'Вова', age: 25 }
			let yura = { name: 'Юра', age: 30 }
			let olya = { name: 'Оля', age: 28 }

			let arr4 = [vova, yura, olya]

			function sortByAge(arr) {
				arr4.sort((a, b) => a.age - b.age)
			}

			sortByAge(arr)

			alert(arr[0].name)
			alert(arr[2].name)
			alert(arr[1].name)

			// 10-я задача Напишите функцию shuffle(array), которая перемешивает (переупорядочивает случайным образом) элементы массива.
			function shuffle(array) {
				array.sort(() => Math.random() - 0.5)
			}

			let arr5 = [1, 2, 3]
			shuffle(arr5)
			alert(arr5)

			// 11-я задача Напишите функцию getAverageAge(users), которая принимает массив объектов со свойством age и возвращает средний возраст.
			function getAverageAge(users) {
				return users.reduce((prev, user) => prev + user.age, 0) / users.length
			}

			let kirill = { name: 'Кирилл', age: 25 }
			let vadim = { name: 'Вадим', age: 30 }
			let nastya = { name: 'Настя', age: 29 }

			let arr6 = [kirill, pevadimtya, nastya]

			alert(getAverageAge(arr6))

			// 12-я задача Напишите функцию unique(arr), которая возвращает массив, содержащий только уникальные элементы arr.
			function unique(arr) {
				let result = []

				for (let str of arr) {
					if (!result.includes(str)) {
						result.push(str)
					}
				}

				return result
			}

			let strings = [
				'кришна',
				'кришна',
				'харе',
				'харе',
				'харе',
				'харе',
				'кришна',
				'кришна',
				':-O',
			]

			alert(unique(strings))

			// 13-я задача Создайте функцию groupById(arr), которая создаст из него объект с id в качестве ключа и элементами массива в качестве значений.
			function groupById(array) {
				return array.reduce((obj, value) => {
					obj[value.id] = value
					return obj
				}, {})
			}
		</script>
	</body>
</html>
